local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local UIS = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer
local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")

local ESPFolder = Instance.new("Folder")
ESPFolder.Name = "ToolESPFolder"
ESPFolder.Parent = game:GetService("CoreGui")



getgenv().aimbot = false
getgenv().wc = false
getgenv().hitpart = "HumanoidRootPart"
getgenv().pred = 0.160126357
getgenv().fovEnabled = false
getgenv().fovSize = 100
getgenv().fovColor = Color3.fromRGB(255,255,255)
getgenv().maxDistance = 240
getgenv().antiragdoll = false
getgenv().LoopTP = false
_G.tplayer = nil
getgenv().anahtar = false
getgenv().unlock = false
getgenv().infjump = false
getgenv().clip = false
getgenv().lip = false
getgenv().otorun = false
local UNDER_OFFSET = 5

getgenv().OnBoxESP = false 
getgenv().name = false
getgenv().Tool = false
getgenv().highlight = false
local Box_Thickness = 0
local Autothickness = true
local WHITE = Color3.fromRGB(255,255,255)
local ESP_COLOR = Color3.fromRGB(255, 255, 255)
local FILL_TRANSPARENCY = 0.5
local OUTLINE_TRANSPARENCY = 0

local anim = Instance.new("Animation")
anim.AnimationId = "rbxassetid://6694500885"
local track = hum:LoadAnimation(anim)

local allowedWeapons = {
	mp5a3 = true,
	pistols = true,
	sniper = true,
	deagle = true,
	minigun = true
}

local savedCFrame
local returned = false


local gui = Instance.new("ScreenGui")
gui.Name = "ToggleArcticGui"
gui.ResetOnSpawn = false
gui.Parent = game:GetService("CoreGui")

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 90, 0, 30)
button.Position = UDim2.new(0, 20, 0, 200)
button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Text = "Arctic"
button.TextSize = 14
button.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 6)
corner.Parent = button

-- DRAG SYSTEM
local dragging = false
local dragStart, startPos
button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = button.Position
	end
end)
button.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)
UIS.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStart
		button.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end)

button.MouseButton1Click:Connect(function()
	if game.CoreGui:FindFirstChild("Arctic") then
		game.CoreGui.Arctic.Enabled = not game.CoreGui.Arctic.Enabled
	end
end)


function setTarget(v)
    v = string.lower(v)
    for _, p in pairs(Players:GetPlayers()) do
        if string.find(string.lower(p.Name), v, 1, true)
        or string.find(string.lower(p.DisplayName), v, 1, true) then
            _G.tplayer = p.Name
            print("Target:", p.Name)
            break
        end
    end
end

RunService.Heartbeat:Connect(function()
    if not getgenv().LoopTP then
        if savedCFrame and not returned then
            local hrp = lp.Character and lp.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = savedCFrame
                savedCFrame = nil
                returned = true
            end
        end
        return
    end

    local char = lp.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    if not savedCFrame then
        savedCFrame = hrp.CFrame
        returned = false
    end

    local target = _G.tplayer and Players:FindFirstChild(_G.tplayer)
    if not target then return end

    local thrp = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
    if not thrp then return end

    local vel = thrp.Velocity
    local flatVel = Vector3.new(vel.X, 0, vel.Z)
    local speed = flatVel.Magnitude

    local targetPos
    if speed < 2 then
        targetPos = thrp.Position - Vector3.new(0, UNDER_OFFSET, 0)
    else
        local dir = flatVel.Unit
        local dist = math.clamp(speed * 0.35, 4, 9)
        targetPos = thrp.Position + (dir * dist) - Vector3.new(0, UNDER_OFFSET, 0)
    end
	
    hrp.CFrame = CFrame.new(targetPos) * CFrame.Angles(math.pi / 2, 0, 0)
end)

UIS.JumpRequest:Connect(function()
	if getgenv().infjump then
		hum:ChangeState("Jumping")
	end
end)

local circle = Drawing.new("Circle")
circle.Thickness = 2
circle.Filled = false

local function inFov(worldPos)
	local screenPos, onScreen = Camera:WorldToViewportPoint(worldPos)
	if not onScreen then return false end

	local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
	return (Vector2.new(screenPos.X, screenPos.Y) - center).Magnitude <= getgenv().fovSize
end

local function wallCheck(pos, ignore)
	if not getgenv().wc then return true end
	local params = RaycastParams.new()
	params.FilterDescendantsInstances = {lp.Character, ignore}
	params.FilterType = Enum.RaycastFilterType.Blacklist
	return Workspace:Raycast(Camera.CFrame.Position, pos - Camera.CFrame.Position, params) == nil
end

local lockedTarget = nil

local function getNewTarget()
	local best, closest = nil, math.huge
	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= lp and p.Character and p.Character:FindFirstChild(getgenv().hitpart) then
			local h = p.Character:FindFirstChildOfClass("Humanoid")
			if h and h.Health > 0 then
				local part = p.Character[getgenv().hitpart]
				local dist = (part.Position - Camera.CFrame.Position).Magnitude
				if dist <= getgenv().maxDistance and inFov(part.Position) then
					if wallCheck(part.Position, p.Character) and dist < closest then
						best = part
						closest = dist
					end
				end
			end
		end
	end
	return best
end

RunService.RenderStepped:Connect(function()
	circle.Visible = getgenv().fovEnabled
	circle.Radius = getgenv().fovSize
	circle.Color = getgenv().fovColor
	circle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)

	if not getgenv().aimbot then
		lockedTarget = nil
		return
	end

	if lockedTarget then
		local h = lockedTarget.Parent:FindFirstChildOfClass("Humanoid")
		if not h or h.Health <= 0 or not inFov(lockedTarget.Position) or (lockedTarget.Position - Camera.CFrame.Position).Magnitude > getgenv().maxDistance then
			lockedTarget = nil
		end
	end

	if not lockedTarget then
		lockedTarget = getNewTarget()
	end

	if lockedTarget then
		local vel = lockedTarget.AssemblyLinearVelocity or Vector3.zero
		local aimPos = lockedTarget.Position + (vel * getgenv().pred)
		Camera.CFrame = CFrame.new(Camera.CFrame.Position, aimPos)
	end
end)

local function setupCharacter(character)
	local humanoid = character:WaitForChild("Humanoid")
	RunService.Heartbeat:Connect(function()
		if not getgenv().antiragdoll then return end
		if humanoid:GetState() == Enum.HumanoidStateType.Physics then
			humanoid.RequiresNeck = true
			humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
		end
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)
	end)
	humanoid.HealthChanged:Connect(function()
		if getgenv().antiragdoll and humanoid:GetState() == Enum.HumanoidStateType.Physics then
			humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
		end
	end)
end

if char then setupCharacter(char) end
lp.CharacterAdded:Connect(setupCharacter)

local function holdingAllowedWeapon()
	local char = lp.Character
	if not char then return false end
	for _, obj in ipairs(char:GetChildren()) do
		if obj:IsA("Tool") and allowedWeapons[string.lower(obj.Name)] then
			return true
		end
	end
	return false
end

RunService.Heartbeat:Connect(function()
	if getgenv().unlock == true and holdingAllowedWeapon() then
		lp.CameraMode = Enum.CameraMode.Classic
		lp.CameraMinZoomDistance = 0
		lp.CameraMaxZoomDistance = 99
	end
end)

local dashGui = Instance.new("ScreenGui")
dashGui.Name = "DashGui"
dashGui.ResetOnSpawn = false
dashGui.Parent = game.CoreGui
local btn = Instance.new("TextButton")
btn.Size = UDim2.new(0,80,0,35)
btn.Position = UDim2.new(0,20,0.5,-20)
btn.Text = "Flip"
btn.BackgroundColor3 = Color3.fromRGB(30,30,30)
btn.TextColor3 = Color3.new(1,1,1)
btn.Font = Enum.Font.SourceSansBold
btn.TextSize = 14
btn.Active = true
btn.Draggable = true
btn.Parent = dashGui

dashGui.Enabled = false

local function Dash()
	local char = lp.Character or lp.CharacterAdded:Wait()
	local hum = char:WaitForChild("Humanoid")
	local hrp = char:WaitForChild("HumanoidRootPart")
	local anim = Instance.new("Animation")
	anim.AnimationId = "rbxassetid://6690693371"
	local track = hum:LoadAnimation(anim)
	track:Play()

	local targetSpeed = 106
	local duration = 0.25
	local startTime = tick()
	local connection
	connection = RunService.Heartbeat:Connect(function()
		if not hrp.Parent then connection:Disconnect() return end
		local alpha = math.clamp((tick()-startTime)/duration,0,1)
		local dir = hrp.CFrame.LookVector
		local desiredVelocity = dir*targetSpeed
		hrp.AssemblyLinearVelocity = hrp.AssemblyLinearVelocity:Lerp(desiredVelocity,alpha)
		if alpha>=1 then connection:Disconnect() end
	end)
end
btn.MouseButton1Click:Connect(Dash)

RunService.RenderStepped:Connect(function()
	if getgenv().otorun and hum.MoveDirection.Magnitude > 0 then
		hum.WalkSpeed = 23
		if not track.IsPlaying then track:Play() end
	else
		hum.WalkSpeed = 16
		if track.IsPlaying then track:Stop() end
	end
end)

local busy = false
RunService.Heartbeat:Connect(function()
	if not getgenv().anahtar or busy then return end
	local char = lp.Character
	local hrp = char and char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end
	local crate = Workspace:FindFirstChild("crate")
	if not crate then return end
	local handle = crate:FindFirstChild("Handle") or crate:FindFirstChild("Part") or crate:FindFirstChildWhichIsA("BasePart")
	if not handle then return end

	busy = true
	task.wait(20)
	if not getgenv().anahtar or not hrp.Parent or crate.Name ~= "crate" then
		busy = false
		return
	end

	local savedCFrame = hrp.CFrame
	hrp.CFrame = handle.CFrame * CFrame.new(0,0,-2)
	task.wait(0.25)
	for _, v in ipairs(crate:GetDescendants()) do
		if v:IsA("ProximityPrompt") and v.Enabled then
			fireproximityprompt(v)
			break
		end
	end
	task.wait(0.2)
	crate.Name = "CollectedCrate"
	task.wait(0.2)
	hrp.CFrame = savedCFrame
	task.wait(0.5)
	busy = false
end)

local Venyx = loadstring(game:HttpGet("https://raw.githubusercontent.com/Sigma-3131/Scripts/main/Ven%20X"))()
local NotifyLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/Kinlei/Dynissimo/main/Scripts/AkaliNotif.lua"))()
local Notify = NotifyLibrary.Notify


local UI = Venyx.new({
    title = "Arctic"
})

-- // Themes
local Themes = {
    Background = Color3.fromRGB(0, 0, 0),
    Glow = Color3.fromRGB(0, 0, 0),
    Accent = Color3.fromRGB(10, 10, 10),
    LightContrast = Color3.fromRGB(65,65,65),
    DarkContrast = Color3.fromRGB(14, 14, 14),  
    TextColor = Color3.fromRGB(181, 50, 255)
}


local Tab = UI:addPage({
    title = "Target",
    icon = 5012544693
})

local Tab1 = UI:addPage({
    title = "Player",
    icon = 5012544693
})

local Tab3 = UI:addPage({
    title = "Aiming",
    icon = 5012544693
})

local Tab4 = UI:addPage({
    title = "Starting",
    icon = 5012544693
})



local Tab2 = UI:addPage({
    title = "Teleport",
    icon = 5012544693
})

local Section = Tab:addSection({
    title = "Target Options"
})

local Section3 = Tab3:addSection({
    title = "Aimbot Settings"
})

local Section5 = Tab3:addSection({
    title = "ESP Settings"
})



local Section1 = Tab1:addSection({
    title = "Player Options"
})

local Section4 = Tab1:addSection({
    title = "Game Options"
})

local Sectio = Tab4:addSection({
    title = "Starting Options"
})

local Section2 = Tab2:addSection({
    title = "Locations"
})

-- =========================
-- TARGET SEÃ‡ME
-- =========================
function setTarget(v)
    v = string.lower(v)
    for _, p in pairs(Players:GetPlayers()) do
        if string.find(string.lower(p.Name), v, 1, true) or string.find(string.lower(p.DisplayName), v, 1, true) then
            _G.tplayer = p.Name
            print("Target:", p.Name)
            break
        end
    end
end

-- GUI kodu
Section:addTextbox({
    title = "Select Target",
    default = "Default",
    callback = function(va)
        setTarget(va)
    end
})

-- Spectate toggle
getgenv().Spectate = false
local spectateConnection

Section:addToggle({
    title = "Spectate",
    callback = function(t)
        getgenv().Spectate = t

        if spectateConnection then
            spectateConnection:Disconnect()
            spectateConnection = nil
        end

        if t and _G.tplayer then
            spectateConnection = RunService.Heartbeat:Connect(function()
                local targetPlayer = Players:FindFirstChild(_G.tplayer)
                if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                    workspace.CurrentCamera.CameraSubject = targetPlayer.Character
                else
                    -- EÄŸer target yoksa LocalPlayer'e dÃ¶n
                    workspace.CurrentCamera.CameraSubject = lp.Character
                end
            end)
        else
            workspace.CurrentCamera.CameraSubject = lp.Character
        end
    end
})

-- LoopTP toggle
Section:addToggle({
    title = "LoopTP",
    callback = function(state)
        getgenv().LoopTP = state
    end
})

-- Under Value ayarÄ±
Section:addTextbox({
    title = "Under Value",
    default = "5",
    callback = function(va)
        -- SayÄ± olarak alÄ±yoruz
        UNDER_OFFSET = tonumber(va) or 5
    end
})


local sll = {"Head","HumanoidRootPart"}
Section3:addDropdown({
    title = "Hit Part",
    list = sll,
    callback = function(qa)
      getgenv().hitpart = qa
    end
})

Section3:addToggle({
    title = "Enable",
    callback = function(state)
        getgenv().aimbot = state
    end
})

Section3:addToggle({
    title = "Wall Check",
    callback = function(state)
        getgenv().wc = state
    end
})

Section3:addToggle({
    title = "Show Fov",
    callback = function(state)
        getgenv().fovEnabled = state
    end
})

Section3:addTextbox({
    title = "Fov Size",
    default = "100",
    callback = function(va)
        getgenv().fovSize = va
    end
})

Section3:addTextbox({
    title = "Locking Distance",
    default = "300",
    callback = function(va)
        getgenv().maxDistance = va
    end
})

Section3:addTextbox({
    title = "Prediction",
    default = "0.160126357",
    callback = function(va)
        getgenv().pred = va
    end
})


Section5:addToggle({
    title = "Name Esp",
    callback = function(state)
    	getgenv().name = state
    end
})

Section5:addToggle({
    title = "Box Esp",
    callback = function(state)
        getgenv().OnBoxESP = state 
    end
})

Section5:addToggle({
    title = "Highlight",
    callback = function(state)
        getgenv().highlight = state
    end
})

Section5:addToggle({
    title = "Tool Esp",
    callback = function(state)
        getgenv().Tool = state
    end
})

Section5:addTextbox({
    title = "Highlight Fill Transparency",
    default = "0.5",
    callback = function(va)
        FILL_TRANSPARENCY = va
    end
})

Section5:addTextbox({
    title = "Highlight Outline Transparency",
    default = "0",
    callback = function(va)
        OUTLINE_TRANSPARENCY = va
    end
})


Section1:addTextbox({
    title = "Walk Speed",
    default = "16",
    callback = function(va)
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = va
    end
})

Section1:addTextbox({
    title = "Jump Heigh",
    default = "10",
    callback = function(aa)
        game.Players.LocalPlayer.Character.Humanoid.JumpHeight = aa
    end
})


Section1:addToggle({
    title = "Noclip",
    callback = function(state)
                getgenv().clip = state
  if getgenv().clip == true then
    NoclipLoop = game:GetService("RunService").Stepped:Connect(function()
      for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
        if v:IsA("BasePart") and v.CanCollide == true then
          v.CanCollide = false
        end
      end
    end)
  elseif getgenv().clip == false and NoclipLoop then
    NoclipLoop:Disconnect()
  end
    end
})

Section1:addToggle({
    title = "Ä°nf Jump",
    callback = function(state)
        getgenv().infjump = state
    end
})



Section1:addToggle({
    title = "Anti Fling",
    callback = function(a)
getgenv().lip = a
if getgenv().lip == true then
NoclipLoop =
game:GetService("RunService").Stepped:Connect(
function()
for _, player in pairs(game.Players:GetPlayers()) do
if player ~= game.Players.LocalPlayer and player.Character then
for _, part in pairs(player.Character:GetChildren()) do
if part:IsA("BasePart") and part.CanCollide == true then
part.CanCollide = false
end
end
end
end
end
)
elseif getgenv().lip == false and NoclipLoop then
NoclipLoop:Disconnect()
end
    end
})

Section1:addToggle({
    title = "Float",
    callback = function(t)
floattoggle = t
if floattoggle then
while wait(0.001) do
pcall(
function()
if workspace:FindFirstChild("FloatExploit") then
workspace.FloatExploit:Destroy()
end
local Float = Instance.new("Part", game.Workspace)
Float.Anchored = true
Float.Name = "FloatExploit"
Float.Transparency = 1
Float.Position =
game.Players.LocalPlayer.Character.HumanoidRootPart.Position +
Vector3.new(0, -3.1, 0)
Float.Size = Vector3.new(3, 0, 3)
end
)
if not floattoggle then
if workspace:FindFirstChild("FloatExploit") then
workspace.FloatExploit:Destroy()
end
break
end
end
end
end
})

Section4:addToggle({
    title = "Unlock Kamera",
    callback = function(t)
    	getgenv().unlock = t
    end
})

Section4:addToggle({
    title = "Anti Rangoll",
    callback = function(state)
    	getgenv().antiragdoll = state
    end
})

Section4:addToggle({
    title = "Auto Get Crates",
    callback = function(state)
    	getgenv().anahtar = state
    end
})

Section4:addToggle({
    title = "Auto Run",
    callback = function(t)
getgenv().otorun = t
    end
})

Section4:addToggle({
    title = "Enable Force Flip Button",
    callback = function(t)
    	game.CoreGui.DashGui.Enabled = t
    end
})

Section4:addKeybind({
    title = "Force Flip",
    key = Enum.KeyCode.T,
    callback = function()
local char = game.Players.LocalPlayer.Character or game.Players.LocalPlayer.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")
local anim = Instance.new("Animation")
anim.AnimationId = "rbxassetid://6690693371"
local track = hum:LoadAnimation(anim)
track:Play()
local targetSpeed = 106
local duration = 0.25 -- dash sÃ¼resi (kÃ¼Ã§Ã¼k = daha hÄ±zlÄ±)
local startTime = tick()
local connection
connection = RunService.Heartbeat:Connect(function()
	local alpha = math.clamp((tick() - startTime) / duration, 0, 1)
	local dir = hrp.CFrame.LookVector
	local desiredVelocity = dir * targetSpeed
	hrp.AssemblyLinearVelocity =
		hrp.AssemblyLinearVelocity:Lerp(desiredVelocity, alpha)
	if alpha >= 1 then
		connection:Disconnect()
	end
end)
    end,
    changedCallback = function(key)
        print("Changed Keybind", key)
    end
})

Section4:addButton({
    title = "No Jump Cooldown",
    callback = function()
for _, v in next, getconnections(plr.Character.Humanoid.StateChanged) do
    local info = getinfo(v.Function)
    if info.what == "Lua" and info.source == "=Workspace."..plr.Name..".movementt" then
        v:Disable()
    end
end
        end
})


Section4:addButton({
    title = "Anti Sit",
    callback = function()
local function neutralizarAsiento(asiento)
	if asiento:IsA("Seat") or asiento:IsA("VehicleSeat") then
		asiento.Disabled = true
		asiento.CanTouch = false
		asiento:SetAttribute("Neutralizado", true)
	end
end
for _, objeto in ipairs(Workspace:GetDescendants()) do
	neutralizarAsiento(objeto)
end
Workspace.DescendantAdded:Connect(function(obj)
	if obj:IsA("Seat") or obj:IsA("VehicleSeat") then
		task.wait(0.1)
		neutralizarAsiento(obj)
	end
end)
player.CharacterAdded:Connect(function(char)
	local humanoid = char:WaitForChild("Humanoid")
	humanoid:GetPropertyChangedSignal("Sit"):Connect(function()
		if humanoid.Sit then
			humanoid.Sit = false
		end
	end)
end)
    end
})

Sectio:addButton({
    title = "Start With RocketLauncher",
    callback = function()
        game:GetService("ReplicatedStorage").events.guiEvent:FireServer("changeClass","rocket launcher","none")
        end
})

Sectio:addButton({
    title = "Start With Taser",
    callback = function()
        game:GetService("ReplicatedStorage").events.guiEvent:FireServer("changeClass","taser","none")
        end
})

Sectio:addButton({
    title = "Start With Kick",
    callback = function()
        game:GetService("ReplicatedStorage").events.guiEvent:FireServer("changeClass","kick","none")
        end
})

Sectio:addButton({
    title = "Start BoomBox",
    callback = function()
    	game:GetService("ReplicatedStorage").events.guiEvent:FireServer("changeClass","Boombox","none")
    end
})

Sectio:addButton({
    title = "Start Cheetos",
    callback = function()
    	game:GetService("ReplicatedStorage").events.guiEvent:FireServer("changeClass","cheetos","none")

    end
})


Section2:addButton({
    title = "Mid",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2197, 164, 1368)
    end
})

Section2:addButton({
    title = "Ä°sland 1",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2552, 211, 1362)
    end
})

Section2:addButton({
    title = "Ä°sland 2",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2574, 188, 1206)
    end
})

Section2:addButton({
    title = "Ä°sland 3",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2331, 227, 1051)
    end
})

Section2:addButton({
    title = "Ä°sland 4",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2144, 227, 991)
    end
})

Section2:addButton({
    title = "Ä°sland 5",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1965, 227, 1064)
    end
})

Section2:addButton({
    title = "Ä°sland 6",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1885, 220, 1235)
    end
})

Section2:addButton({
    title = "Park",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2213, 165, 1443)
    end
})

Section2:addButton({
    title = "Secret Room",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2362, 158, 1167)
    end
})

Section2:addButton({
    title = "Underground Secret Room",
    callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2216, 119, 1266)
    end
})

Section2:addButton({
    title = "House",
    callback = function()
        lp.Character.HumanoidRootPart.CFrame = CFrame.new(2040, 179, 1457)
    end
})

Section2:addButton({
    title = "Underground Mid",
    callback = function()
        lp.Character.HumanoidRootPart.CFrame = CFrame.new(2196, 147, 1315)
    end
})

local function esp(p, cr)
	local h = cr:WaitForChild("Humanoid")
	local hrp = cr:WaitForChild("Head")

	local text = Drawing.new("Text")
	text.Visible = false
	text.Center = true
	text.Outline = false 
	text.Font = 3
	text.Size = 16.16
	text.Color = Color3.new(170,170,170)

	local conection
	local conection2
	local conection3

	local function dc()
		text.Visible = false
		text:Remove()
		if conection then
			conection:Disconnect()
			conection = nil 
		end
		if conection2 then
			conection2:Disconnect()
			conection2 = nil 
		end
		if conection3 then
			conection3:Disconnect()
			conection3 = nil 
		end
	end

	conection2 = cr.AncestryChanged:Connect(function(_, parent)
		if not parent then
			dc()
		end
	end)

	conection3 = h.HealthChanged:Connect(function(v)
		if (v <= 0) or (h:GetState() == Enum.HumanoidStateType.Dead) then
			dc()
		end
	end)

	conection = RunService.RenderStepped:Connect(function()
		if not getgenv().name then
			text.Visible = false
			return
		end
		local hrp_pos, hrp_onscreen = Camera:WorldToViewportPoint(hrp.Position)
		if hrp_onscreen then
			text.Position = Vector2.new(hrp_pos.X, hrp_pos.Y - 27)
			text.Text = "[ "..p.Name.." ]"
			text.Visible = true
		else
			text.Visible = false
		end
	end)
end

local function p_added(p)
	if p.Character then
		esp(p, p.Character)
	end
	p.CharacterAdded:Connect(function(cr)
		esp(p, cr)
	end)
end

for i, p in next, Players:GetPlayers() do 
	if p ~= LocalPlayer then
		p_added(p)
	end
end

Players.PlayerAdded:Connect(p_added)

local function CreateBoxESP(Target)
    local Lines = {}
	
    for i = 1, 12 do
        local l = Drawing.new("Line")
        l.Visible = false
        l.Color = WHITE
        l.Thickness = Box_Thickness
        Lines[i] = l
    end

    local Conn
    Conn = RunService.RenderStepped:Connect(function()
    	
        if not getgenv().OnBoxESP then
            for _,v in pairs(Lines) do
                v.Visible = false
            end
            return
        end

        if not Target
        or Target == LocalPlayer
        or not Target.Character
        or not Target.Character:FindFirstChild("HumanoidRootPart")
        or not Target.Character:FindFirstChild("Humanoid")
        or not Target.Character:FindFirstChild("Head")
        or Target.Character.Humanoid.Health <= 0 then
            for _,v in pairs(Lines) do
                v.Visible = false
            end
            if not Players:FindFirstChild(Target.Name) then
                Conn:Disconnect()
            end
            return
        end

        local HRP = Target.Character.HumanoidRootPart
        local Head = Target.Character.Head

        local _, Visible = Camera:WorldToViewportPoint(HRP.Position)
        if not Visible then
            for _,v in pairs(Lines) do
                v.Visible = false
            end
            return
        end
    	
        local Scale = Head.Size.Y / 2
        local Size = Vector3.new(2,3,1.5) * (Scale * 2)
        local CF = HRP.CFrame

        local function W2S(v)
            local p = Camera:WorldToViewportPoint(v)
            return Vector2.new(p.X, p.Y)
        end
    	
        local T1 = W2S((CF * CFrame.new(-Size.X,  Size.Y, -Size.Z)).p)
        local T2 = W2S((CF * CFrame.new(-Size.X,  Size.Y,  Size.Z)).p)
        local T3 = W2S((CF * CFrame.new( Size.X,  Size.Y,  Size.Z)).p)
        local T4 = W2S((CF * CFrame.new( Size.X,  Size.Y, -Size.Z)).p)
    	
        local B1 = W2S((CF * CFrame.new(-Size.X, -Size.Y, -Size.Z)).p)
        local B2 = W2S((CF * CFrame.new(-Size.X, -Size.Y,  Size.Z)).p)
        local B3 = W2S((CF * CFrame.new( Size.X, -Size.Y,  Size.Z)).p)
        local B4 = W2S((CF * CFrame.new( Size.X, -Size.Y, -Size.Z)).p)
    	
        Lines[1].From, Lines[1].To = T1, T2
        Lines[2].From, Lines[2].To = T2, T3
        Lines[3].From, Lines[3].To = T3, T4
        Lines[4].From, Lines[4].To = T4, T1

        Lines[5].From, Lines[5].To = B1, B2
        Lines[6].From, Lines[6].To = B2, B3
        Lines[7].From, Lines[7].To = B3, B4
        Lines[8].From, Lines[8].To = B4, B1

        Lines[9].From,  Lines[9].To  = B1, T1
        Lines[10].From, Lines[10].To = B2, T2
        Lines[11].From, Lines[11].To = B3, T3
        Lines[12].From, Lines[12].To = B4, T4
    	
        local Thick = Box_Thickness
        if Autothickness
        and LocalPlayer.Character
        and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local Dist = (LocalPlayer.Character.HumanoidRootPart.Position - HRP.Position).Magnitude
            Thick = math.clamp(1 / Dist * 120, 0.3, 4)
        end

        for i = 1, 12 do
            Lines[i].Thickness = Thick
            Lines[i].Color = WHITE
            Lines[i].Visible = true
        end
    end)
end

for _,P in ipairs(Players:GetPlayers()) do
    if P ~= LocalPlayer then
        CreateBoxESP(P)
    end
end

Players.PlayerAdded:Connect(function(P)
    task.wait(1)
    CreateBoxESP(P)
end)

-- =========================
-- AYAR
-- =========================


-- =========================
-- SERVÄ°SLER
-- =========================


-- =========================
-- TOOL ESP YAP
-- =========================
local function CreateToolESP(player)
    local esp = Instance.new("BillboardGui")
    esp.Name = "ToolESP"
    esp.Adornee = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    esp.Size = UDim2.new(0, 120, 0, 25)        -- Sabit boyut
    esp.StudsOffset = Vector3.new(0, -3, 0)    -- Ayak seviyesinin altÄ±
    esp.AlwaysOnTop = true
    esp.MaxDistance = 1000
    esp.Parent = ESPFolder

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.new(1, 1, 1)      -- Beyaz
    label.TextStrokeTransparency = 0
    label.TextScaled = false
    label.Font = Enum.Font.SourceSans         -- Daha ince font
    label.TextSize = 16                        -- KÃ¼Ã§Ã¼k ve ince
    label.Text = ""                             -- BaÅŸlangÄ±Ã§ta boÅŸ
    label.Visible = false                       -- KapalÄ±yken gÃ¶rÃ¼nmez
    label.Parent = esp

    return esp
end

-- =========================
-- ESP UYGULA
-- =========================
local function ApplyToolESP(player)
    if player == lp then return end
    if not player.Character then return end

    local hrp = player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local toolESP = player.Character:FindFirstChild("ToolESP") or CreateToolESP(player)
    toolESP.Adornee = hrp

    -- RenderStepped ile sÃ¼rekli gÃ¼ncelle
    RunService.RenderStepped:Connect(function()
        if not toolESP or not toolESP.TextLabel then return end

        if getgenv().Tool and player.Character then
            toolESP.TextLabel.Visible = true
            local tool = player.Character:FindFirstChildWhichIsA("Tool")
            if tool then
                toolESP.TextLabel.Text = "Tool: "..tool.Name
            else
                toolESP.TextLabel.Text = "Tool: Nothing"
            end
        else
            toolESP.TextLabel.Visible = false  -- Anahtar kapalÄ±ysa tamamen kaybolsun
        end
    end)
end

-- =========================
-- MEVCUT VE YENÄ° OYUNCULAR
-- =========================
for _, p in pairs(Players:GetPlayers()) do
    p.CharacterAdded:Connect(function(char)
        wait(0.1)
        ApplyToolESP(p)
    end)
    if p.Character then
        ApplyToolESP(p)
    end
end

Players.PlayerAdded:Connect(function(p)
    p.CharacterAdded:Connect(function(char)
        wait(0.1)
        ApplyToolESP(p)
    end)
end)

local function removeHighlight(character)
    for _, obj in ipairs(CoreGui:GetChildren()) do
        if obj:IsA("Highlight") and obj.Adornee == character then
            obj:Destroy()
        end
    end
end

-- ðŸ”´ TÃœM HIGHLIGHTLARI SÄ°LER
local function clearAllHighlights()
    for _, obj in ipairs(CoreGui:GetChildren()) do
        if obj:IsA("Highlight") and obj.Name == "Enemy_ESP" then
            obj:Destroy()
        end
    end
end

local function updateHighlight(player)
    if not getgenv().highlight then
        if player.Character then
            removeHighlight(player.Character)
        end
        return
    end

    if player.Character then
        removeHighlight(player.Character)
    end

    if player ~= LocalPlayer and (player.Team ~= LocalPlayer.Team or player.Team == nil) then
        if player.Character then
            local highlight = Instance.new("Highlight")
            highlight.Name = "Enemy_ESP"
            highlight.FillColor = ESP_COLOR
            highlight.OutlineColor = ESP_COLOR
            highlight.FillTransparency = FILL_TRANSPARENCY
            highlight.OutlineTransparency = OUTLINE_TRANSPARENCY
            highlight.Adornee = player.Character
            highlight.Parent = CoreGui
        end
    end
end

local function setupPlayer(player)
    player:GetPropertyChangedSignal("Team"):Connect(function()
        updateHighlight(player)
    end)

    player.CharacterAdded:Connect(function()
        task.wait(0.3)
        updateHighlight(player)
    end)

    updateHighlight(player)
end

for _, player in ipairs(Players:GetPlayers()) do
    setupPlayer(player)
end

Players.PlayerAdded:Connect(setupPlayer)

LocalPlayer:GetPropertyChangedSignal("Team"):Connect(function()
    for _, player in ipairs(Players:GetPlayers()) do
        updateHighlight(player)
    end
end)

Players.PlayerRemoving:Connect(function(player)
    if player.Character then
        removeHighlight(player.Character)
    end
end)

-- ðŸ” RUNSERVICE LOOP (TOGGLE TAKÄ°BÄ°)
local lastState = getgenv().highlight

RunService.Heartbeat:Connect(function()
    local current = getgenv().highlight
    if current ~= lastState then
        lastState = current

        if not current then
            clearAllHighlights()
        else
            for _, player in ipairs(Players:GetPlayers()) do
                updateHighlight(player)
            end
        end
    end
end)